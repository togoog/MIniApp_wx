!function(){var t="2",o="ftest",e="default",n=require("./push-stat-conf.js"),i=!1,s=!1,a={uu:"",ak:"",pm:"",wvv:"",wsdk:"",sv:"",wv:"",nt:"",ww:"",wh:"",pr:"",pp:"",lat:"",lng:"",ev:"",st:"",et:"",ppx:"",ppy:"",v:"",data:"",fid:"",lang:"",wsr:"",ifo:"",jscode:""};function p(t){var o=wx.getStorageSync("t_uuid");return o?a.ifo=!1:(o=""+Date.now()+Math.floor(1e7*Math.random()),wx.setStorageSync("t_uuid",o),a.ifo=!0),o}var r=function(t){wx.getLocation({type:"wgs84",success:function(o){i=!0,a.lat=o.latitude,a.lng=o.longitude,d(t,"location","location")},fail:function(){i=!1}})},f=function(t){wx.getSetting({success:function(o){o.authSetting["scope.userLocation"]&&r(t),o.authSetting["scope.userInfo"]&&l(t,function(o){t.aldpush_login_data=o,d(t,"user_info","userinfo")})}})};function c(){var t=wx.getStorageSync("push_ifo");return t=t?0:1}var l=function(t,o){wx.login({success:function(t){t.code?(a.jscode=t.code,wx.getUserInfo({success:function(t){s=!0,o(t)},fail:function(t){s=!1,d(t,"user_info_close","user_info_close")}})):a.jscode=0}})},u=function(t,o,e){void 0===arguments[1]&&(o="GET"),void 0===arguments[2]&&(e="d.html");var n=0,i=function(){wx.request({url:"https://ftest.aldwx.com/"+e,data:t,header:{},method:o,success:function(){},fail:function(){n<2&&(n++,t.retryTimes=n,i())}})};i()};function d(o,e,i){var s=p(o);if("app"==e&&"Hide"==i)var r=Date.now();var f="";f="user_info"==e?o.aldpush_login_data:"user_info_close"==e?{status:0}:0;var c=a.ifo?1:0,l="fpage"==e||"fhpage"==e?a.fid:0,d="page"==e||"app"==e||"fpage"==e||"fhpage"==e?0:a.jscode,h={uu:s,ak:n.app_key,pm:a.pm?a.pm:0,wvv:a.wvv?a.wvv:0,wsdk:a.wsdk?a.wsdk:0,sv:a.sv?a.sv:0,wv:a.wv?a.wv:0,nt:a.nt?a.nt:0,ww:a.ww?a.ww:0,wh:a.wh?a.wh:0,pr:a.pr?a.pr:0,pp:a.pp?a.pp:0,lat:a.lat?a.lat:0,lng:a.lng?a.lng:0,ev:e,life:i,st:Date.now(),et:r||0,ppx:a.ppx?a.ppx:0,ppy:a.ppy?a.ppy:0,v:t,data:f,fid:l,lang:a.lang?a.lang:0,wsr:"app"==e?o.aldpush_showOptions:{},ifo:c,jscode:d};u(h,"GET","d.html")}function h(t){this.app=t}function w(t){this.aldPush=new h(this);var o=this;void 0!==t?(o.aldpush_showOptions=t,a.pp=t.path):o.aldpush_showOptions={},function(){wx.getNetworkType({success:function(t){a.nt=t.networkType}})}(),f(o),wx.getSystemInfo({success:function(t){a.pm=t.model,a.wv=t.version,a.wsdk=void 0===t.SDKVersion?"1.0.0":t.SDKVersion,a.sv=t.system,a.wvv=t.platform,a.ww=t.screenWidth,a.wh=t.screenHeight,a.pr=t.pixelRatio,a.lang=t.language},complete:function(){d(o,"app","launch")}}),wx.getSystemInfoSync({success:function(t){a.pm=t.model,a.wv=t.version,a.wsdk=void 0===t.SDKVersion?"1.0.0":t.SDKVersion,a.sv=t.system,a.wvv=t.platform,a.ww=t.screenWidth,a.wh=t.screenHeight,a.pr=t.pixelRatio,a.lang=t.language},complete:function(){d(o,"app","launch")}})}function g(t){var o=this;o.aldpush_showOptions=void 0!==t?t:{},d(o,"app","show")}function v(){d(this,"app","hide")}function m(t){var o=this;a.pp=o.__route__,"default"!=e&&e!=o.__route__&&(s||l(o,function(t){o.aldpush_login_data=t,d(o,"user_info","userinfo")})),e=o.__route__,d(o,"page","show")}function x(t,o){for(var e=a.ww,n=a.wh,i=this,s={length:[],is_showHideBtn:!0},p=0;p<=50;p++){var r='-webkit-transform: scale(0.5);transform:scale(1);content:"";height:88px;width:88px;border:1px solid transparent;background-color:transparent;position:fixed;z-index:-1;left:'+Math.ceil(Math.random()*e)+"px;top:"+Math.ceil(Math.random()*n)+"px;";s.length.push(r)}var f=wx.getStorageSync("isShowClick");i.setData({hideBtnData:s,isShowClick:Boolean(f),btn_style:{name:"sdk默认按钮",style:"border:1px solid transparent;"},miniSubscribeBtn:{name:"订阅",style:"width:50%;border:1px solid #000;padding:8px 50px;border-radius:8px;font-size:0.8rem;line-height:1.5;background-color:#fff;"},miniFollowBtn:{name:"+关注",style:"width:50%;border:1px solid #000;padding:8px 50px;border-radius:8px;font-size:0.8rem;line-height:1.5;background-color:#fff;"},longSubscribeBtn:{name:"点击订阅",style:"border:1px solid #000;padding:3px 100px;font-size:0.8rem;line-height:1.5;background-color:#fff;"},longFollowBtn:{name:"点击关注",style:"border:1px solid#000;padding:3px 100px;font-size:0.8rem;line-height:1.5;background-color:#fff;"}})}function _(t){console.log(t);var o=this;a.ppx=t.detail.target.offsetLeft,a.ppy=t.detail.target.offsetTop,a.fid=t.detail.formId;function e(){wx.setStorageSync("isShowClick","false"),o.setData({is_showHideBtn:!0,isShowClick:"false"}),wx.showToast({title:"成功",icon:"success",duration:2e3})}s||l(o,function(t){o.aldpush_login_data=t,d(o,"user_info","userinfo"),e()}),i||r(o),d(o,"fpage","clickform")}function S(t){var o=this;a.ppx=t.detail.target.offsetLeft,a.ppy=t.detail.target.offsetTop,a.fid=t.detail.formId,o.setData({is_showHideBtn:!0}),d(o,"fhpage","hideclickform")}function y(t,o,e){if(t[o]){var n=t[o];t[o]=function(t){e.call(this,t,o),n.call(this,t)}}else t[o]=function(t){e.call(this,t,o)}}var k=App;App=function(t){y(t,"onLaunch",w),y(t,"onShow",g),y(t,"onHide",v),k(t)};var b=Page;Page=function(t){y(t,"onShow",m),y(t,"onLoad",x),y(t,"pushFormSubmit",_),y(t,"hidepushFormSubmit",S),b(t)}}();